Index: nonlinear/set_data.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\n\r\n\r\n\r\n\r\nimport mod_param\r\n\r\ndef set_data():\r\n    \"\"\"\r\n    This subroutine processes forcing, boundary, climatology, and other input data. It time-interpolates between snapshots.\r\n    \"\"\"\r\n    import mod_param\r\n    import mod_boundary\r\n    import mod_forces\r\n    import mod_grid\r\n    import mod_ncparam\r\n    import mod_ocean\r\n    import mod_stepping\r\n    import mod_scalars\r\n\r\n\r\n\r\n# Set point Sources/Sinks (river runoff).\r\n# =======================================================================\r\n\r\n\r\n# Point Source/Sink vertically integrated mass transport.\r\n\r\n# ifdef ANA_PSOURCE\r\n      if LuvSrc or LwSrc or ANY(LtracerSrc(:)):\r\n        CALL ana_psource (iNLM)\r\n\r\n\r\n\r\n# Set forcing data.\r\n# =======================================================================\r\n\r\n# Set switch to process surface atmospheric fields.\r\n\r\n\r\n\r\n#  if !defined BULK_FLUXES && !defined BULK_FLUXES2D\r\n\r\n# Set kinematic surface momentum flux (m2/s2).\r\n\r\n#  ifdef ANA_SMFLUX\r\n      ana_smflux (iNLM)\r\n\r\n# endif\r\n\r\n\r\n# Set surface air pressure (mb).\r\n\r\n#  ifdef ANA_PAIR\r\n        ana_pair(iNLM)\r\n\r\n#  endif\r\n\r\n\r\n\r\n\r\n# ======================================================================\r\n#  Set open boundary conditions fields.\r\n# ======================================================================\r\n#  Set free-surface open boundary conditions.\r\n\r\n# ifdef ANA_FSOBC\r\n        ana_fsobc(iNLM)\r\n\r\n\r\n# Set 2D momentum component open boundary conditions.\r\n\r\n# ifdef ANA_M2OBC\r\n        CALL ana_m2obc (ng, tile, iNLM)\r\n\r\n\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/nonlinear/set_data.py b/nonlinear/set_data.py
--- a/nonlinear/set_data.py	(revision f8904d215ffbf6ac77ac0430aba1404644226554)
+++ b/nonlinear/set_data.py	(date 1684512159774)
@@ -17,8 +17,18 @@
     import mod_ocean
     import mod_stepping
     import mod_scalars
+    import ana_grid
+
 
 
+    ana_grid.bulkFluxes()
+    ana_grid.sources()
+    ana_grid.kinematicSurfaceMomentumFlux()
+    ana_grid.
+
+
+    # implement later
+    # do something with netCDF here
 
 # Set point Sources/Sinks (river runoff).
 # =======================================================================
@@ -26,12 +36,7 @@
 
 # Point Source/Sink vertically integrated mass transport.
 
-# ifdef ANA_PSOURCE
-      if LuvSrc or LwSrc or ANY(LtracerSrc(:)):
-        CALL ana_psource (iNLM)
-
-
-
+#
 # Set forcing data.
 # =======================================================================
 
@@ -43,10 +48,7 @@
 
 # Set kinematic surface momentum flux (m2/s2).
 
-#  ifdef ANA_SMFLUX
-      ana_smflux (iNLM)
-
-# endif
+#
 
 
 # Set surface air pressure (mb).
Index: functionals/anaBasin.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># BASIN analytical case\r\n\r\nimport anaBASE\r\n\r\ndef getBasicGridParameters():\r\n    # Gets the basic geometric parameters.\r\n\r\n    Xsize = 3600.0E+03\r\n    Esize = 2800.0E+03\r\n    depth = 5000.0\r\n    f0 = 1.0E-04\r\n    beta = 2.0E-11\r\n\r\n    return Xsize, Esize, depth, f0, beta\r\n\r\n\r\ndef computeAngle():\r\n    return anaBASE.computeAngle()\r\n\r\ndef computeCoriolis():\r\n    return anaBASE.computeCoriolis()\r\n\r\n\r\ndef computeCoordinates(Xsize, Esize, GRID):\r\n    # Compute the (ξ,η) coordinates at PSI- and RHO-points.\r\n    # Set grid spacing (m).\r\n    # -----------------------------------------------------------------------\r\n\r\n    # Determine I- and J-ranges for computing grid data.  These ranges\r\n    # are special in periodic boundary conditons since periodicity cannot\r\n    # be imposed in the grid coordinates.\r\n\r\n    # Uses the basic method.\r\n    return anaBASE.computeCoordinates(Xsize, Esize, GRID)\r\n\r\n\r\ndef computeStatistics():\r\n    return anaBASE.computeStatistics()\r\n\r\n\r\ndef computeCoordinateTransform(GRID):\r\n    return anaBASE.computeCoordinateTransform(GRID)\r\n\r\n\r\ndef computeBathymetry(depth, GRID):\r\n    return anaBASE.computeBathymetry(depth, GRID)
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/functionals/anaBasin.py b/functionals/anaBasin.py
--- a/functionals/anaBasin.py	(revision f8904d215ffbf6ac77ac0430aba1404644226554)
+++ b/functionals/anaBasin.py	(date 1684512337288)
@@ -43,4 +43,6 @@
 
 
 def computeBathymetry(depth, GRID):
-    return anaBASE.computeBathymetry(depth, GRID)
\ No newline at end of file
+    return anaBASE.computeBathymetry(depth, GRID)
+
+def sources(GRID):
\ No newline at end of file
Index: nonlinear/main2d.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>def main2d(RunInterval):\r\n\"\"\" This subroutine is the main driver for nonlinear ROMS/TOMS when configurated as shallow water (barotropic) ocean\r\nmodel only. It advances forward  the vertically integrated primitive equations for all nested grids,  if any,  by the\r\nspecified  time interval (seconds), RunInterval.\r\n\"\"\"\r\n\r\n\r\n    import mod_param\r\n    import mod_scalars\r\n    from ntimestep import ntimestep\r\n    # import mod_stepping\r\n    # import dateclock_mod\r\n    # import step2d_mod\r\n    #from ini_fields_mod import ini_zeta, ini_fields, set_vbc\r\n    # import mod_iounits\r\n    #use set_vbc_mod\r\n    #use step_floats_mod\r\n    # use strings_mod\r\n\r\n\r\n\r\n\r\n\r\n    # Time-step vertically integrated equations.\r\n    # =======================================================================\r\n    # !\r\n    # !  Time-step the 3D kernel for the specified time interval (seconds),\r\n    # !  RunInterval.\r\n    # !\r\n    Time_Step = True\r\n\r\n    # kernel loop\r\n    while Time_Step:\r\n\r\n        # Determine number of time steps to compute in each nested grid layer\r\n        # based on the specified time interval (seconds), RunInterval. Non\r\n        # nesting applications have NestLayers=1. Notice that RunInterval is\r\n        # set in the calling driver. Its value may span the full period of the\r\n        # simulation, a multi-model coupling interval (RunInterval > ifac*dt),\r\n        # or just a single step (RunInterval=0).\r\n        Nsteps, Rsteps = ntimesteps(iNLM, RunInterval, Nsteps, Rsteps)\r\n\r\n\r\n        # Time-step governing equations for Nsteps.\r\n        for istep in range(Nsteps):\r\n\r\n            # Set time indices and time clock.\r\n            iic += 1\r\n            time += dt\r\n            tdays = time*sec2day\r\n            time_string(time, time_code)\r\n            if (step_counter == Rsteps):\r\n                Time_Step = False\r\n\r\n            # Read in required data, if any, from input NetCDF files.\r\n            # ----------------------------------------------------------------------\r\n            get_data()\r\n\r\n            # If applicable, process input data: time interpolate between data snapshots.\r\n            # -----------------------------------------------------------------------\r\n            set_data()\r\n\r\n\r\n            # Initialize all time levels and compute other initial fields.\r\n            # -----------------------------------------------------------------------\r\n            if iic == ntstart:\r\n\r\n                # Initialize free-surface.\r\n                ini_zeta(iNLM)\r\n\r\n                # Initialize other state variables.\r\n                ini_fields (iNLM)\r\n\r\n\r\n\r\n                # Set vertical boundary conditions. Process tidal forcing.\r\n                # -----------------------------------------------------------------------\r\n                set_vbc()\r\n\r\n\r\n\r\n            # If appropriate, write out fields into output NetCDF files.  Notice\r\n            # that IO data is written in delayed and serial mode.  Exit if last\r\n            # time step.\r\n            # -----------------------------------------------------------------------\r\n\r\n            output()\r\n            if (iic == ntend + 1):\r\n                exit()\r\n\r\n\r\n            # Solve the vertically integrated primitive equations for the\r\n            # free-surface and momentum components.\r\n            # -----------------------------------------------------------------------\r\n\r\n            # Set time indices for predictor step. The PREDICTOR_2D_STEP switch\r\n            # it is assumed to be false before the first time-step.\r\n\r\n            iif = 1\r\n            nfast = 1\r\n            next_indx1 = 3 - indx1\r\n            if not PREDICTOR_2D_STEP:\r\n                PREDICTOR_2D_STEP = True\r\n                if FIRST_2D_STEP:\r\n                    kstp = indx1\r\n                else:\r\n                    kstp = 3 - indx1\r\n\r\n                knew = 3\r\n                krhs = indx1\r\n\r\n            # Predictor step - Advance barotropic equations using 2D time-step\r\n            # ==============   predictor scheme.\r\n            call step2d_LF_AM3()\r\n\r\n\r\n            # Set time indices for corrector step.\r\n            if PREDICTOR_2D_STEP:\r\n                PREDICTOR_2D_STEP = False\r\n                knew = next_indx1\r\n                kstp = 3 - knew\r\n                krhs = 3\r\n                if iif < nfast + 1:\r\n                    indx1 = next_indx1\r\n\r\n            # Corrector step - Apply 2D time-step corrector scheme.  Notice that\r\n            # ==============   there is not need for a corrector step during the\r\n            # auxiliary (nfast+1) time-step.\r\n\r\n            if iif < nfast + 1:\r\n                step2d()\r\n\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/nonlinear/main2d.py b/nonlinear/main2d.py
--- a/nonlinear/main2d.py	(revision f8904d215ffbf6ac77ac0430aba1404644226554)
+++ b/nonlinear/main2d.py	(date 1684513945301)
@@ -16,6 +16,10 @@
     #use set_vbc_mod
     #use step_floats_mod
     # use strings_mod
+    from get_data import get_data
+    from set_data import set_data
+    from zetabc import zetabc
+
 
 
 
@@ -38,14 +42,16 @@
         # set in the calling driver. Its value may span the full period of the
         # simulation, a multi-model coupling interval (RunInterval > ifac*dt),
         # or just a single step (RunInterval=0).
-        Nsteps, Rsteps = ntimesteps(iNLM, RunInterval, Nsteps, Rsteps)
+        Nsteps, Rsteps = ntimestep(iNLM, RunInterval, Nsteps, Rsteps)
+
+        #put the initial condition here
 
 
         # Time-step governing equations for Nsteps.
         for istep in range(Nsteps):
 
             # Set time indices and time clock.
-            iic += 1
+            iic += 1    #these will move to another part of the codebase
             time += dt
             tdays = time*sec2day
             time_string(time, time_code)
@@ -75,7 +81,8 @@
 
                 # Set vertical boundary conditions. Process tidal forcing.
                 # -----------------------------------------------------------------------
-                set_vbc()
+                set_verticalbc()
+
 
 
 
@@ -132,5 +139,3 @@
 
 
 
-
-
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"1447012b-a5d7-4617-8595-bf18be6f6cc2\" name=\"Changes\" comment=\"Working on step2d.py.&#10;mod_physical_params.py created.\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/modules/mod_grid.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/modules/mod_grid.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/tests/ana_grid.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/tests/ana_grid_old.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/tmp/testProgram.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/tmp/testProgram.py\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Python Script\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"master\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2LQH9xZTbrJr1qNclotul09gBTg\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;last_opened_file_path&quot;: &quot;D:/projects/src/oceangpu/nonlinear&quot;,\r\n    &quot;settings.editor.selected.configurable&quot;: &quot;preferences.sourceCode.Python&quot;\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\nonlinear\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\modules\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\functionals\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\tests\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\modules\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\obsolete\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\utility\" />\r\n      <recent name=\"D:\\projects\\src\\oceangpu\\tmp\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Python.testProgram\">\r\n    <configuration name=\"testProgram\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"oceangpu\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/tmp\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/tmp/testProgram.py\" />\r\n      <option name=\"PARAMETERS\" value=\"\" />\r\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\r\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\r\n      <option name=\"MODULE_MODE\" value=\"false\" />\r\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\r\n      <option name=\"INPUT_FILE\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"testSpline\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"oceangpu\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/tests\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/tests/testSpline.py\" />\r\n      <option name=\"PARAMETERS\" value=\"\" />\r\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\r\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\r\n      <option name=\"MODULE_MODE\" value=\"false\" />\r\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\r\n      <option name=\"INPUT_FILE\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Python.testProgram\" />\r\n        <item itemvalue=\"Python.testSpline\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"1447012b-a5d7-4617-8595-bf18be6f6cc2\" name=\"Changes\" comment=\"\" />\r\n      <created>1675796239226</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1675796239226</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"...\">\r\n      <created>1676041842247</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676041842247</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"...\">\r\n      <created>1676042086999</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676042086999</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"First commit\">\r\n      <created>1676043599262</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676043599262</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Some tests\">\r\n      <created>1676385086068</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676385086068</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"...\">\r\n      <created>1682950262877</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1682950262877</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"...\">\r\n      <created>1683296778178</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1683296778178</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"...\">\r\n      <created>1684265756602</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1684265756602</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"...\">\r\n      <created>1684341954186</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1684341954186</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"Working on step2d.py.&#10;mod_physical_params.py created.\">\r\n      <created>1684436574610</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1684436574610</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"10\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"First commit\" />\r\n    <MESSAGE value=\"Some tests\" />\r\n    <MESSAGE value=\"...\" />\r\n    <MESSAGE value=\"Working on step2d.py.&#10;mod_physical_params.py created.\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Working on step2d.py.&#10;mod_physical_params.py created.\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/tests/testSpline.py</url>\r\n          <line>27</line>\r\n          <option name=\"timeStamp\" value=\"2\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/utility/io_utils.py</url>\r\n          <line>90</line>\r\n          <option name=\"timeStamp\" value=\"11\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/utility/dateclock.py</url>\r\n          <line>1098</line>\r\n          <option name=\"timeStamp\" value=\"52\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/nonlinear/bc_2d.py</url>\r\n          <line>31</line>\r\n          <option name=\"timeStamp\" value=\"66\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/functionals/ana_grid.py</url>\r\n          <line>49</line>\r\n          <option name=\"timeStamp\" value=\"71\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/functionals/ana_grid.py</url>\r\n          <line>70</line>\r\n          <option name=\"timeStamp\" value=\"72\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/functionals/anaBASE.py</url>\r\n          <line>37</line>\r\n          <option name=\"timeStamp\" value=\"73\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/tmp/testProgram.py</url>\r\n          <line>51</line>\r\n          <option name=\"timeStamp\" value=\"76\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/functionals/anaBASE.py</url>\r\n          <line>21</line>\r\n          <option name=\"timeStamp\" value=\"77\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/nonlinear/zetabc.py</url>\r\n          <line>17</line>\r\n          <option name=\"timeStamp\" value=\"80\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/modules/mod_boundary.py</url>\r\n          <line>237</line>\r\n          <option name=\"timeStamp\" value=\"82\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/modules/mod_boundary.py</url>\r\n          <line>209</line>\r\n          <option name=\"timeStamp\" value=\"86\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n      <default-breakpoints>\r\n        <breakpoint type=\"python-exception\">\r\n          <properties notifyOnTerminate=\"true\" exception=\"BaseException\">\r\n            <option name=\"notifyOnTerminate\" value=\"true\" />\r\n          </properties>\r\n        </breakpoint>\r\n      </default-breakpoints>\r\n    </breakpoint-manager>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision f8904d215ffbf6ac77ac0430aba1404644226554)
+++ b/.idea/workspace.xml	(date 1684514061701)
@@ -1,11 +1,15 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
+  <component name="AutoImportSettings">
+    <option name="autoReloadType" value="SELECTIVE" />
+  </component>
   <component name="ChangeListManager">
     <list default="true" id="1447012b-a5d7-4617-8595-bf18be6f6cc2" name="Changes" comment="Working on step2d.py.&#10;mod_physical_params.py created.">
+      <change afterPath="$PROJECT_DIR$/modules/mod_sources.py" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/modules/mod_grid.py" beforeDir="false" afterPath="$PROJECT_DIR$/modules/mod_grid.py" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/tests/ana_grid.py" beforeDir="false" afterPath="$PROJECT_DIR$/tests/ana_grid_old.py" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/tmp/testProgram.py" beforeDir="false" afterPath="$PROJECT_DIR$/tmp/testProgram.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/functionals/anaBasin.py" beforeDir="false" afterPath="$PROJECT_DIR$/functionals/anaBasin.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/nonlinear/main2d.py" beforeDir="false" afterPath="$PROJECT_DIR$/nonlinear/main2d.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/nonlinear/set_data.py" beforeDir="false" afterPath="$PROJECT_DIR$/nonlinear/set_data.py" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
Index: modules/mod_sources.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mod_sources.py b/modules/mod_sources.py
new file mode 100644
--- /dev/null	(date 1684766585932)
+++ b/modules/mod_sources.py	(date 1684766585932)
@@ -0,0 +1,15 @@
+# collin to make a draft of mod sources. then connect with jose again (just outline the structure,functions etc, doesnt need to be perfect)
+
+
+#for some reason in fortran (ROMS) they set a maximum number of sources manually to 200. No clue what it's about
+#it seems like it's just a check in case a user put a value of like 2000 sources by accident but there is no explaination in the code.
+ANA_PSOURCE_2D = True
+#for now, only implementing analytical sources, can do netcdf later
+
+
+
+def apply_sources(SOURCES):
+    #seperate 2D and 3D as a 3D source could be in the intermediate layers of the water
+    if ANA_PSOURCE_2D:
+        SOURCES.Isrc
+
